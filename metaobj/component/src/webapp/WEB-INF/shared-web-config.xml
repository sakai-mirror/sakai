<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans default-lazy-init="true">
   <bean id="titleController" class="org.sakaiproject.metaobj.utils.mvc.impl.servlet.ViewControllerImpl">
      <property name="controller">
         <bean class="org.sakaiproject.metaobj.shared.control.TitleController">
            <property name="worksiteManager">
               <ref bean="org.sakaiproject.metaobj.worksite.mgt.WorksiteManager"/>
            </property>
         </bean>
      </property>
      <property name="screenMappings">
         <props>
            <prop key="success">title</prop>
         </props>
      </property>
   </bean>

   <bean id="org.sakaiproject.metaobj.repository.PostFilePickerProcessor.documentRootPostProcessor"
      class="org.sakaiproject.metaobj.repository.control.DocumentRootPostProcessor">
      <property name="fileArtifactHome">
         <ref bean="fileArtifactHome"/>
      </property>
      <property name="view">
         <value>/WEB-INF/jsp/repository/selectDocumentRoot.jsp</value>
      </property>
      <property name="params">
         <map>
            <entry key="selectBoxName">
               <value>documentRoot</value>
            </entry>
         </map>
      </property>
   </bean>


   <bean id="viewArtifactController" class="org.sakaiproject.metaobj.utils.mvc.impl.servlet.ViewControllerImpl">
      <property name="controller">
         <bean class="org.sakaiproject.metaobj.shared.control.ViewArtifact">
            <property name="idManager">
               <ref bean="idManager"/>
            </property>
            <property name="homeFactory">
               <ref bean="homeFactory"/>
            </property>
            <property name="authzManager">
               <ref bean="authzManager"/>
            </property>
            <property name="authManager">
               <ref bean="authManager"/>
            </property>
            <property name="editViews">
               <props>
                  <prop key="fileArtifact">editFileArtifactForward</prop>
                  <prop key="scaffolding2">editScaffoldingForward</prop>
                  <prop key="folder">editFolderForward</prop>
                  <prop key="org.sakaiproject.metaobj.shared.mgt.home.StructuredArtifactHome">editXmlElementForward</prop>
                  <prop key="org.sakaiproject.metaobj.shared.mgt.home.StructuredArtifactDefinition">editXmlElementForward</prop>
               </props>
            </property>
            <property name="readOnlyViews">
               <props>
                  <prop key="fileArtifact">fileArtifactViewForward</prop>
                  <prop key="folder">folderViewForward</prop>
                  <prop key="org.sakaiproject.metaobj.shared.mgt.home.StructuredArtifactHome">viewXmlElementForward</prop>
                  <prop key="org.sakaiproject.metaobj.shared.mgt.home.StructuredArtifactDefinition">viewXmlElementForward</prop>
               </props>
            </property>
            <property name="defaultEditView">
               <value>defaultArtifactView</value>
            </property>
            <property name="defaultReadOnlyView">
               <value>defaultArtifactView</value>
            </property>
         </bean>
      </property>
      <property name="screenMappings">
         <props>
            <prop key="failure">viewArtifactFailed</prop>
         </props>
      </property>
      <property name="commandName">
         <value>bean</value>
      </property>
      <property name="commandClass">
         <value>org.sakaiproject.metaobj.shared.control.ViewArtifactForm</value>
      </property>
   </bean>


   <!--
      <bean id="structuredArtifactDefinitionValidator" class="org.sakaiproject.metaobj.shared.control.StructuredArtifactDefinitionValidator"/>
   -->
   <bean id="org.springframework.web.servlet.HandlerInterceptor.SakaiStyleSheetInterceptor"
      class="org.sakaiproject.metaobj.shared.control.SakaiStyleSheetInterceptor">
      <property name="worksiteManager">
         <ref bean="org.sakaiproject.metaobj.worksite.mgt.WorksiteManager"/>
      </property>
   </bean>

   <bean id="controllerFilterManager" class="org.sakaiproject.metaobj.utils.mvc.impl.ControllerFilterManager"/>

   <bean id="org.springframework.web.servlet.HandlerExceptionResolver.errorHandler"
      class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
      <property name="defaultErrorView">
         <value>defaultErrorPage</value>
      </property>
   </bean>

</beans>
