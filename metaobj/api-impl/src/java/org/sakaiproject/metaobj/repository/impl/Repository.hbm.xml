<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 2.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">
<hibernate-mapping
   package="org.sakaiproject.metaobj.repository.model">

   <class name="ArtifactStream" table="osp_artifact_stream">
      <id name="rowId" column="resourceId" length="32" type="org.sakaiproject.metaobj.shared.IdType">
         <generator class="org.sakaiproject.metaobj.shared.IdGenerator"/>
      </id>
      <property name="id" length="32" type="org.sakaiproject.metaobj.shared.IdType" not-null="true"/>
      <property name="typeId" length="32" type="org.sakaiproject.metaobj.shared.IdType" not-null="false"/>
      <property name="dataStream" type="blob" not-null="false"/>
   </class>

   <class name="NodeMetadata" table="osp_node_metadata">
      <cache usage="nonstrict-read-write"/>
      <id name="id" length="40" type="org.sakaiproject.metaobj.shared.IdType">
         <generator class="org.sakaiproject.metaobj.shared.IdGenerator"/>
      </id>
      <property name="name" not-null="true"/>
      <property name="type" column="typeId" length="32"
         type="org.sakaiproject.metaobj.shared.mgt.HomeUserType" not-null="false"/>
      <property name="size" column="artifact_size" type="java.lang.Long" not-null="false"/>
      <property name="primaryMimeType" length="32" not-null="false"/>
      <property name="subMimeType" length="32" not-null="false"/>
      <property name="creation" column="creation" not-null="false" update="false"/>
      <property name="lastModified" column="last_modified" not-null="false"/>
      <property name="owner" type="org.sakaiproject.metaobj.shared.mgt.AgentUserType" column="owner_id" not-null="false"/>
      <property name="worksiteId" length="32" type="org.sakaiproject.metaobj.shared.IdType" not-null="false"/>
   </class>

   <class name="TreeNode" table="osp_tree_node">
      <id name="rowId" column="row_id" length="32" type="org.sakaiproject.metaobj.shared.IdType">
         <generator class="org.sakaiproject.metaobj.shared.IdGenerator"/>
      </id>
      <property name="nodeId" column="id" length="32" type="org.sakaiproject.metaobj.shared.IdType" not-null="true"/>
      <property name="name" not-null="true"/>
      <property name="uri"> 
      	<column name="uri" not-null="true" index="osp_TreeNode_Uri_IDX" />
      </property>
      <many-to-one name="parent" outer-join="false">
         <column name="parent" index="pind"/> <!---->
      </many-to-one>
      <!--
      <bag name="children"
         inverse="true"
         lazy="true"
         cascade="save-update">
         <key column="parent"/>
         <one-to-many class="TreeNode"/>
      </bag>
      -->
   </class>

</hibernate-mapping>