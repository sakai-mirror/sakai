<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD 2.0//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping package="org.sakaiproject.component.common.edu.coursemanagement">

    <class name="CourseSectionImpl" table="CM_COURSESECTION_T">
        <id name="courseSectionId" column="COURSESECTIONID" type="java.lang.Long">
            <generator class="native">
              <param name="sequence">CM_COURSESECTION_ID_S</param>
            </generator>
        </id>
 
        <!-- Meta data --> 
        <property name="title" column="TITLE" type="java.lang.String" not-null="true"/>
        <property name="description" column="DESCRIPTION" type="java.lang.String" not-null="false" />
        <property name="sectionNumber" column="SECTIONNUMBER" type="java.lang.String"  not-null="true" />
        <property name="maximumStudents" column="MAXIMUMSTUDENTS" type="java.lang.Integer"  />
        <many-to-one name="session"
            column="SESSIONID"
            class="org.sakaiproject.component.common.edu.coursemanagement.SessionImpl"/>
        <property name="schedule"> 
          <column name="SCHEDULE" sql-type="varchar(4000)"  not-null="false" />
        </property>  
        <property name="sectionEventsString" column="SECTIONEVENTS" type="java.lang.String"  not-null="false" />
        <property name="location"> 
          <column name="LOCATION" sql-type="varchar(4000)"  not-null="false" />
        </property>  
        <property name="meetingTime"> 
          <column name="MEETINGTIME" sql-type="varchar(4000)"  not-null="false" />
        </property>  

        <!-- Typing -->
        <many-to-one name="sectionStatus"
            column="COURSESECTIONSTATUSID"
            class="org.sakaiproject.component.common.edu.coursemanagement.CourseSectionStatusTypeImpl"/>
        <many-to-one name="sectionType"
            column="COURSESECTIONTYPEID"
            class="org.sakaiproject.component.common.edu.coursemanagement.CourseSectionTypeImpl"/>
        <property name="holdingSection" column="HOLDINGSECTION" type="java.lang.Boolean" />

        <!-- Grouping -->
        <set name="participationSet" cascade="all" inverse="true">
            <key column="COURSESECTIONID"/>
            <one-to-many class="ParticipationRecordImpl"/>
        </set>
        <set name="enrollmentRecords" cascade="all" inverse="true">
            <key column="COURSESECTIONID"/>
            <one-to-many class="EnrollmentRecordImpl"/>
        </set>        
        <many-to-one name="enrollmentStatus"
            column="ENROLLMENTSTATUSID"
            class="org.sakaiproject.component.common.edu.coursemanagement.EnrollmentStatusTypeImpl"/>

        <!-- Structural -->
        <property name="courseOffering" column="COURSEOFFERINGUUID" type="java.lang.String"  not-null="true" />
        <many-to-one name="parentSection"
            column="PARENTSECTIONID"
            class="org.sakaiproject.component.common.edu.coursemanagement.CourseSectionImpl"/>
        <set name="subSectionSet" cascade="all" inverse="true">
            <key column="COURSESECTIONID"/>
            <one-to-many class="CourseSectionImpl"/>
        </set>
        
        <!-- Persistence --> 
        <property name="uuid" column="UUID" type="java.lang.String"  not-null="true" />
        <property name="createdBy" column="CREATEDBY" type="java.lang.String"  not-null="true" />
        <property name="createdDate" column="CREATEDDATE" type="java.util.Date"  not-null="true" />
        <property name="lastModifiedBy" column="LASTMODIFIEDBY" type="java.lang.String"  not-null="true" />
        <property name="lastModifiedDate" column="LASTMODIFIEDDATE" type="java.util.Date"  not-null="true" />

        <!-- Others -->
        <property name="allowSelfRegistration" column="ALLOWSELFREGISTRATION" type="java.lang.Boolean" />
    </class>
    
</hibernate-mapping>
