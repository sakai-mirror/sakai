<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<!-- $Id: web.xml,v 1.25 2005/05/24 23:05:40 daisyf.stanford.edu Exp $ -->
  <display-name>SAM</display-name>
  <description>Sakai Assessment Manager</description>

  <!-- Context Params -->
  <context-param>
    <param-name>PathToSecurity</param-name>
    <param-value>/opt/sa_forms/java/dev</param-value>
  </context-param>

  <context-param>
    <param-name>PathToSettings</param-name>
    <param-value>/opt/j2ee/dev</param-value>
  </context-param>
  
  <!-- if running in Sakai context, build will change to a web.xml with the integrated versions -->
  <context-param>
     <param-name>contextConfigLocation</param-name>
     <param-value>WEB-INF/classes/org/sakaiproject/spring/applicationContextStandalone.xml,
     WEB-INF/classes/org/sakaiproject/spring/BeanDefinitionsStandalone.xml,
     WEB-INF/classes/org/sakaiproject/spring/integrationContextStandalone.xml,
     WEB-INF/classes/org/sakaiproject/spring/samigoApi.xml</param-value>
  </context-param>

  <!-- BEGIN SAMIGO JSF CONTEXT PARAM-->
    <context-param>
        <param-name>com.sun.faces.validateXml</param-name>
        <param-value>false</param-value>
        <description>
            Set this flag to true if you want the JavaServer Faces
            Reference Implementation to validate the XML in your
            faces-config.xml resources against the DTD.  Default
            value is false.
        </description>
    </context-param>

    <context-param>
        <param-name>com.sun.faces.verifyObjects</param-name>
        <param-value>false</param-value>
        <description>
            Set this flag to true if you want the JavaServer Faces
            Reference Implementation to verify that all of the application
            objects you have configured (components, converters,
            renderers, and validators) can be successfully created.
            Default value is false.
        </description>
    </context-param>
  <!-- END SAMIGO JSF CONTEXT PARAM-->


  <!-- Filters  -->

  <!--** Important: This SetCharacterEncodingFilter must be the 1st one in the list of fillter **-->
  <filter>
    <filter-name>Set Character Encoding</filter-name>
    <filter-class>org.sakaiproject.tool.assessment.ui.web.filter.SetCharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>

  <filter>
    <filter-name>Upload Filter</filter-name>
    <filter-class>com.corejsf.UploadFilter</filter-class>
    <init-param>
      <param-name>com.corejsf.UploadFilter.repositoryPath</param-name>
      <param-value>/tmp/</param-value>
    </init-param>
    <init-param>
      <param-name>com.corejsf.UploadFilter.sizeThreshold</param-name>
      <param-value>1024</param-value>
    </init-param>
    <init-param>
      <param-name>com.corejsf.UploadFilter.sizeMax</param-name>
      <param-value>40960</param-value>
    </init-param>
  </filter>

  <filter-mapping>
    <filter-name>Upload Filter</filter-name>
    <url-pattern>/jsf/delivery/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
  </filter-mapping>

  <filter-mapping>
    <filter-name>Upload Filter</filter-name>
    <url-pattern>/jsf/qti/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
  </filter-mapping>


  <filter-mapping>
    <filter-name>Set Character Encoding</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
  </filter-mapping>

  <!-- *******************************************************************  -->

  <!-- Listeners are used to bootstrap application runtime configuration -->

  <!-- PathInfo -->
  <listener>
    <listener-class>org.sakaiproject.tool.assessment.settings.PathInfoInitListener</listener-class>
  </listener>

  <!-- Spring Locator -->
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- OKI OSID -->
  <listener>
    <listener-class>org.sakaiproject.tool.assessment.settings.OkiOsidConfigListener</listener-class>
  </listener>

  <!-- *******************************************************************  -->
  <servlet>
    <servlet-name>LoginServlet</servlet-name>
    <display-name>Login</display-name>
    <description>This is the description of my J2EE component</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.servlet.delivery.LoginServlet</servlet-class>
  </servlet>

  <servlet>
    <servlet-name>ShowQTIServlet</servlet-name>
    <display-name>Show QTI XML</display-name>
    <description>Show QTI XML from XMLDisplay bean</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.servlet.qti.ShowQTIServlet</servlet-class>
  </servlet>

  <servlet>
    <servlet-name>ShowMediaServlet</servlet-name>
    <display-name>Show Media</display-name>
    <description>This is the description of my J2EE component</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.servlet.delivery.ShowMediaServlet</servlet-class>
  </servlet>

  <servlet>
    <servlet-name>PDFServlet</servlet-name>
    <display-name>PDF Servlet</display-name>
    <description>This is the description of my J2EE component</description>
    <servlet-class>org.navigoproject.ui.web.asi.delivery.fop.PDFServlet</servlet-class>
  </servlet>

    <!-- Faces Servlet -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup> 1 </load-on-startup>
    </servlet>

  <servlet>
    <servlet-name>storeApplicationContext</servlet-name>
    <description>This servlet load the Type and all QuestionPool into a HashMap in memory</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.servlet.StoreApplicationContext</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>initAction</servlet-name>
    <description>This servlet load the Type and all QuestionPool into a HashMap in memory</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.web.action.InitAction</servlet-class>
    <load-on-startup>2</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>initMimeTypes</servlet-name>
    <description>This servlet load the Type and all QuestionPool into a HashMap in memory</description>
    <servlet-class>org.sakaiproject.tool.assessment.ui.servlet.InitMimeTypes</servlet-class>
    <load-on-startup>2</load-on-startup>
  </servlet>


    <!-- Faces Servlet Mapping -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xml</url-pattern>
    </servlet-mapping>


  <servlet-mapping>
    <servlet-name>PDFServlet</servlet-name>
    <url-pattern>/servlet/PDFServlet</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>ShowMediaServlet</servlet-name>
    <url-pattern>/servlet/ShowMedia</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>ShowQTIServlet</servlet-name>
    <url-pattern>/servlet/exportQTI</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/servlet/Login</url-pattern>
  </servlet-mapping>


  <!-- BEGIN APACHE AXIS SECTION-->
  <servlet>
    <servlet-name>AxisServlet</servlet-name>
    <display-name>Apache-Axis Servlet</display-name>
    <servlet-class>
        org.apache.axis.transport.http.AxisServlet
    </servlet-class>
  </servlet>

  <servlet>
    <servlet-name>AdminServlet</servlet-name>
    <display-name>Axis Admin Servlet</display-name>
    <servlet-class>
        org.apache.axis.transport.http.AdminServlet
    </servlet-class>
    <load-on-startup>100</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>SOAPMonitorService</servlet-name>
    <display-name>SOAPMonitorService</display-name>
    <servlet-class>
        org.apache.axis.monitor.SOAPMonitorService
    </servlet-class>
    <init-param>
      <param-name>SOAPMonitorPort</param-name>
      <param-value>5001</param-value>
    </init-param>
    <load-on-startup>100</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>/servlet/AxisServlet</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>*.jws</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>AxisServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>SOAPMonitorService</servlet-name>
    <url-pattern>/SOAPMonitor</url-pattern>
  </servlet-mapping>


 <!-- uncomment this if you want the admin servlet -->
  <servlet-mapping>
    <servlet-name>AdminServlet</servlet-name>
    <url-pattern>/servlet/AdminServlet</url-pattern>
  </servlet-mapping>



  <!-- BEGIN SAMIGO JSF SECTION-->


  <!-- JSF TAGLIBS -->
  <jsp-config>
    <jsp-property-group>
      <url-pattern>*.jsp</url-pattern>
      <include-prelude>/include/header.inc</include-prelude>
      <!-- <include-coda>/include/footer.inc</include-coda> -->
    </jsp-property-group>
  <taglib>
    <taglib-uri>http://www.sakaiproject.org/samigo</taglib-uri>
    <taglib-location>/WEB-INF/samigo.tld</taglib-location>
  </taglib>
  <taglib>
    <taglib-uri>http://java.sun.com/jsf/core</taglib-uri>
    <taglib-location>/WEB-INF/jsf_core.tld</taglib-location>
  </taglib>
  <taglib>
    <taglib-uri>http://java.sun.com/jsf/html</taglib-uri>
    <taglib-location>/WEB-INF/html_basic.tld</taglib-location>
  </taglib>
  <taglib>
    <taglib-uri>http://java.sun.com/upload</taglib-uri>
    <taglib-location>/WEB-INF/upload.tld</taglib-location>
  </taglib>
  </jsp-config>
<!-- END SAMIGO JSF -->

  <session-config>
    <session-timeout>60</session-timeout>
  </session-config>

</web-app>
