##<!-- $Header: /cvs/sakai/chef-tool/src/webapp/vm/assignment/chef_assignments_instructor_edit_assignment.vm,v 1.4 2004/10/01 01:18:23 janderse.umich.edu Exp $ -->
## Assignments - Instructor new Assignment view
<script type="text/javascript">
<!--
    function SetMaxPoint(obj_option, obj_textfield)
    {
		if(obj_option.value==3)
		{ 
			obj_textfield.disabled = false;
		}
		else
		{ 
			obj_textfield.disabled = true;
		}
	}

#*
## This function is deprecated
	function SetCloseDate(obj_checkbox, obj_1, obj_2, obj_3, obj_4, obj_5, obj_6)
	{
		if (obj_checkbox.checked)
		{
			obj_1.disabled = false;
			obj_2.disabled = false;
			obj_3.disabled = false;
			obj_4.disabled = false;
			obj_5.disabled = false;
			obj_6.disabled = false;
		}
		else
		{
			obj_1.disabled = true;
			obj_2.disabled = true;
			obj_3.disabled = true;
			obj_4.disabled = true;
			obj_5.disabled = true;
			obj_6.disabled = true;
		}
	}
*#
-->
</script>
<script type="text/javascript" language="JavaScript">
  focus_path = ["$name_title"];
</script>
<div class="chefPortletContainer">
	<div class="chefPortletToolBarMessage">
		Revising assignment...
	</div>
	<div class="chefPortletContent">
		<div class="chefPageviewTitle">
			Edit the form and then choose 'post' at the bottom. A <span class="chefRequiredInline">&nbsp;</span> means required information.			
		</div>
		#if ($alertMessage)<div class="chefAlertBox">Alert: $validator.escapeHtml($alertMessage)</div>#end
		<div style="display:block;clear:both"></div>
		<form name="editForm" action="#toolForm("AssignmentAction")" method="post" >    
			<input type="hidden" name="assignmentId" value="$assignment.Reference" />
			<input type="hidden" name="assignmentContentId" value="$assignment.ContentReference" />
			<fieldset>
				<legend>
					Assignment
				</legend>
				<table class="chefEditItem" summary="This table contains the infos of editing assignment" border="0">
					<tr valign="top"> 
						<td class="chefLabel" nowrap="nowrap">
							Title:
						</td>
						<td class="chefRequiredInline">
						</td>
						<td align="left"> 
							<input id="$name_title" name="$name_title" type="text"  value="$validator.escapeHtml($!value_title)" size="30" maxlength="100" />
						</td>
					</tr>
					#*
					<tr valign="top"> 
						<td class="chefLabel" nowrap="nowrap">
							<span class="chefRequiredInline">
								Section:
							</span>
						</td>
						<td align="left"> 
							<select name="$name_Section" multiple="multiple" size="3" tabindex="3" onchange="blur()">
								#foreach ($i in ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "all"])
									#if ($value_Sections.indexOf($i)!=-1)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
							<div class="chefInlineInstructions">
								Note - To select multiples:
								On PC, choose CTRL key while clicking on 2nd and subsequent sections;
								On Mac, choose Apple key while clicking on 2nd and subsequent sections;<br />
							</div>
						</td>
					</tr>
					*#
					<tr valign="top"> 
						<td class="chefLabel" nowrap="nowrap">
							Opens:
						</td>
						<td class="chefRequiredInline">
						</td>
						<td align="left" nowrap="nowrap">
							#chef_dateselectionwidget($name_OpenYear $name_OpenMonth $name_OpenDay 2002 2005 $value_OpenYear $value_OpenMonth $value_OpenDay)
							at 
							<select name="$name_OpenHour" id="$name_OpenHour" onchange="blur()">
								#foreach ($i in [1..12])
									#if ($value_OpenHour==$i)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
							<select name="$name_OpenMin" id="$name_OpenMin" onchange="blur()">
								#foreach ($i in [00, 15, 30, 45])
									#if ($i == $value_OpenMin)
										#if ($i == 0)
											<option value="$i" selected="selected">00</option>
										#else
											<option value="$i" selected="selected">$i</option>
										#end
									#else
										#if ($i == 0)
											<option value="$i">00</option>
										#else
											<option value="$i">$i</option>
										#end
									#end
								#end
							</select>
							<select name="$name_OpenAMPM" id="$name_OpenAMPM" onchange="blur()">
								#foreach ($i in ["AM", "PM"])
									#if ($i == $value_OpenAMPM)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
						</td>
					</tr>
					<tr>
						<td>
						</td>
						<td>
						</td>
						<td class="chefInlineInstructions">
							Students won't see this assignment until this open date.
						</td>
					</tr>	
					<tr valign="top"> 

						<td class="chefLabel" nowrap="nowrap"> 
							Due:
						</td>
						<td class="chefRequiredInline">
						</td>
						<td align="left" nowrap="nowrap"> 
							#chef_dateselectionwidget($name_DueYear $name_DueMonth $name_DueDay 2002 2005 $value_DueYear $value_DueMonth $value_DueDay)
							at 
							<select name="$name_DueHour" id="$name_DueHour" onchange="blur()">
								#foreach ($i in [1..12])
									#if ($i == $value_DueHour)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
							<select name="$name_DueMin" id="$name_DueMin" onchange="blur()">
								#foreach ($i in [00, 15, 30, 45])
									#if ($i == $value_DueMin)
										#if ($i == 0)
											<option value="$i" selected="selected">00</option>
										#else
											<option value="$i" selected="selected">$i</option>
										#end
									#else
										#if ($i == 0)
											<option value="$i">00</option>
										#else
											<option value="$i">$i</option>
										#end
									#end
								#end
							</select>
							<select name="$name_DueAMPM" id="$name_DueAMPM" onchange="blur()">
								#foreach ($i in ["AM", "PM"])
									#if ($i == $value_DueAMPM)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
						</td>
					</tr>
					<tr> 
						<td class="chefLabel" nowrap="nowrap"> 
							<label for="$name_EnableCloseDate">
								Accept submissions until:
							</label>
						</td>
						<td class="chefRequiredInline">
						</td>
						<td nowrap="nowrap"> 
							#chef_dateselectionwidget($name_CloseYear $name_CloseMonth $name_CloseDay 2002 2005 $value_CloseYear $value_CloseMonth $value_CloseDay)
							at 
							<select name="$name_CloseHour" id="$name_CloseHour" onchange="blur()">
								#foreach ($i in [1..12])
									#if ($i == $value_CloseHour)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
							<select name="$name_CloseMin" id="$name_CloseMin" onchange="blur()">
								#foreach ($i in [0, 15, 30, 45])
									#if ($i == $value_CloseMin)
										#if ($i == 0)
											<option value="$i" selected="selected">00</option>
										#else
											<option value="$i" selected="selected">$i</option>
										#end
									#else
										#if ($i == 0)
											<option value="$i">00</option>
										#else
											<option value="$i">$i</option>
										#end
									#end
								#end
							</select>
							<select name="$name_CloseAMPM" id="$name_CloseAMPM" onchange="blur()">
								#foreach ($i in ["AM", "PM"])
									#if ($i == $value_CloseAMPM)
										<option value="$i" selected="selected">$i</option>
									#else
										<option value="$i">$i</option>
									#end
								#end
							</select>
						</td>
					</tr>
					<tr>
						<td>
						</td>
						<td>
						</td>
						<td class="chefInlineInstructions" >
							No assignments can be submitted after this close date. 
						</td>
					</tr>
					<tr valign="top"> 
						<td class="chefLabel" nowrap="nowrap">
							Student submissions:
						</td>
						<td class="chefRequiredInline">
						</td>
						<td align="left"> 
							<select name="$name_SubmissionType" tabindex="3" onchange="blur()">
								#foreach ($i in [1..3])
									#if ($i == $value_SubmissionType)
										<option value="$i" selected="selected">$submissionTypeTable.get($i)</option>
									#else
										<option value="$i">$submissionTypeTable.get($i)</option>
									#end
								#end
							</select>
						</td>
					</tr>
					<tr valign="top"> 
						<td class="chefLabel" nowrap="nowrap">
							Grade scale:
						</td>
						<td class="chefRequiredInline">
						</td>
						<td align="left"> 
							<select name="$name_GradeType" tabindex="3" onchange="SetMaxPoint(this, $name_GradePoints)">
							#foreach ($i in [1..5])
								#if ($i == $value_GradeType)
									<option value="$i" selected="selected">$gradeTypeTable.get($i)</option>
								#else
									<option value="$i">$gradeTypeTable.get($i)</option>
								#end
							#end
							</select>
						</td>
					</tr>
					<tr>
						<td>
						</td>
						<td>
						</td>
						<td>
							For points, enter maximum possible 
							## enable the maxfield when it is points grade type
							#if ($value_GradeType == 3)
								<input name="$name_GradePoints" value="$!value_GradePoints" type="text" size="5" maxlength="20" />
							#else
								<input name="$name_GradePoints" value="$!value_GradePoints" type="text" size="5" maxlength="20" disabled="disabled" />					
							#end
						</td>
					</tr>
					<tr>
						<td>
							&nbsp;
						</td>
						<td colspan="2">
							<fieldset class="chefAttachmentsF">
								<legend class="chefAttachmentsL">	
									Additional resources
								</legend> 
								#set ($size = 0)
								#set ($props = false)
								#foreach ($attachment in $attachments) 
									#set ($props = $attachment.Properties) 
									#if ($!props)
										#set ($size = $size + 1)
									#end
								#end
								#if ($size == 0)
									No attachments ...
								#else
									<ul class="chefAttachmentList">
										#foreach ($attachment in $attachments) 
											#set ($props = false)
											#set ($props = $attachment.Properties) 
											#if ($!props)
												<li>
													#if ($props.getBooleanProperty($props.NamePropIsCollection))
														<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="folder attachment" />
													#else
														<img src = "#imageLink($contentTypeImageService.getContentTypeImage($props.getProperty($props.NamePropContentType)))" border="0" alt="File attachment" />
													#end
													<a href="$attachment.Url" target="_blank">$validator.escapeHtml($props.getPropertyFormatted($props.NamePropDisplayName))</a>						
													#if (!$props.getBooleanProperty($props.NamePropIsCollection))
														($props.getPropertyFormatted($props.NamePropContentLength))
													#end
												</li>
											#end
										#end
									</ul>
								#end							
								<div class="chefButtonRow">
									#if ($size == 0)
										<input type="submit" name="eventSubmit_doAttachments" value="Add attachments" accesskey="a" />
									#else
										<input type="submit" name="eventSubmit_doAttachments" value="Add/drop attachments" accesskey="a" />
									#end
								</div>
							</fieldset>
						</td>
					</tr>
					<tr> 
						<td colspan="3" class ="chefLabel">
							Assignment instructions:
						</td>
					</tr>
					<tr> 
						<td colspan="3"> 
							<table border="0"><tr><td>
							<textarea id="$name_Description" name="$name_Description" cols="80" rows="15" wrap="virtual">$validator.escapeHtmlFormattedTextarea($value_Description)</textarea>
							#chef_setupformattedtextarea($name_Description)
							</td></tr></table>
						</td>
					</tr>
				</table>
					#if (!$hide_assignment_option_flag)
					<table cellpadding="0" cellspacing ="0" class="chefSectionContent" summary="The assignment optional fields section">
						<tr>
							<th>
								<img src="#imageLink("chef/collapse.gif")" alt="Hide options - inactive now" border="0" width="15" height="15" align="top" />Options				
								##<input type="image" name="eventSubmit_doHide_assignment_option" src="#imageLink("chef/collapse.gif")" alt="Hide options" border="0" width="15" height="15" align="top" />Options							
							</th>
						</tr>
						<tr>
							<td  class ="content">
								<table class = "chefEditItem" cellspacing ="0">
									<tr> 
										<td class="chefLabel">Release grade:</td>
										<td> 
											<select name="$name_ReleaseGradeType" tabindex="3" onchange="blur()">
												#if ($value_ReleaseGradeType.equals("false"))
													<option value="true">Immediately</option>
													<option value="false" selected="selected">When I say</option>
												#else
													<option value="true" selected="selected">Immediately</option>
													<option value="false">When I say</option>
												#end
											</select>
										</td>
									</tr>
									<tr>
										<td class="chefLabel">
											<label for="$name_CheckAddDueDate">
												Add due date to schedule:
											</label>
										</td>
										<td>
											#if ($value_CheckAddDueDate.equals("true"))
												<input id="$name_CheckAddDueDate" name="$name_CheckAddDueDate" type="checkbox" value="true" checked="checked" />
											#else
												<input id="$name_CheckAddDueDate" name="$name_CheckAddDueDate" type="checkbox" value="true" />
											#end
										</td>
									</tr>
									<tr> 
										<td class="chefLabel">
											<label for="$name_CheckAutoAnnounce">
												Announce the open date: 
											</label>
										</td>
										<td>
											#if ($value_CheckAutoAnnounce.equals("true"))
												<input id="$name_CheckAutoAnnounce" name="$name_CheckAutoAnnounce" type="checkbox" value="true" checked="checked" />
											#else
												<input id="$name_CheckAutoAnnounce" name="$name_CheckAutoAnnounce" type="checkbox" value="true" />
											#end
										</td>
									</tr>
									<tr> 
										<td class="chefLabel">
											<label for="$name_CheckAddHonorPledge">
												Add honor pledge:
											</label>
										</td>
										<td>
											#if (!$!value_CheckAddHonorPledge.equals("1"))
												<input id="$name_CheckAddHonorPledge" name="$name_CheckAddHonorPledge" type="checkbox" value="2" checked="checked" />
											#else
												<input id="$name_CheckAddHonorPledge" name="$name_CheckAddHonorPledge" type="checkbox" value="2" />
											#end
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>	
					#else
						<input type="hidden" name="$name_ReleaseGradeType" value="$value_ReleaseGradeType" />
						<input type="hidden" name="$name_CheckAddDueDate" value="$value_CheckAddDueDate" />
						<input type="hidden" name="$name_CheckAutoAnnounce" value="$value_CheckAutoAnnounce" />
						<input type="hidden" name="$name_CheckAddHonorPledge" value="$value_CheckAddHonorPledge" />
						<table  cellpadding="0" cellspacing ="0" class="chefSectionContent" summary ="Assignment options">
							<tr>
								<th>
									<input type="image" name="eventSubmit_doShow_assignment_option" src="#imageLink("chef/expand.gif")" alt="Show options" border="0" width="15" height="15" align="top" />Options								
								</th>
							</tr>
						</table>
					#end
			</fieldset>
			<div class="chefButtonRow">
				<input type="submit" name="eventSubmit_doPreview_assignment" value="Preview" />
				#if (!$assignment.draft)
					<input type="submit" name = "eventSubmit_doPost_assignment" value="Post" />
				#else
					<input type="submit" name = "eventSubmit_doPost_assignment" value="Post" />
					<input type="submit" name = "eventSubmit_doSave_assignment" value="Save Draft" />
				#end
				<input type="submit" name="eventSubmit_doCancel_edit_assignment" value="Cancel" />
			</div>									
		</form>
	</div>
</div>