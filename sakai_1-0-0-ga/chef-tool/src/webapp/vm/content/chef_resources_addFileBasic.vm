## $Header: /cvs/sakai/chef-tool/src/webapp/vm/content/chef_resources_addFileBasic.vm,v 1.8 2004/09/21 05:31:32 janderse.umich.edu Exp $ 
## #paitence("upload") %%%  currently disabled -ggolden

<script type="text/javascript" language="JavaScript">
  focus_path = ["filename1"];
</script>
<div class="chefPortletContainer" id="chefPortletContainer">
	<div class ="chefPortletToolBarMessage">
		Adding file(s)...
	</div>
	<script type="text/javascript">
		function enableNewCopyright(obj_mycopyright, obj_newcopyright)
		{
			obj_mycopyright.checked = false;
			obj_newcopyright.checked = true;
		}

		function clearNewCopyright(obj_textarea)
		{
			obj_textarea.value = "";
		}
	</script>
	<div class="chefPortletContent">
		#if ($alertMessage)<div class="chefAlertBox">Alert: $validator.escapeHtml($alertMessage)</div>#end
		<div class ="chefBreadCrumb">
			Location:
			<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="folder" />
			#foreach ($id in $collectionPath)
				#if ($dropboxMode && $id==$homeCollection)
					$siteTitle Drop Box /
				#else
					$validator.escapeHtml($service.getProperties($id).getPropertyFormatted($resourceProperties.NamePropDisplayName)) /
				#end
			#end
			#if ($dropboxMode && $collectionId==$homeCollection)
				$siteTitle Drop Box
			#else
				$validator.escapeHtml($service.getProperties($collectionId).getPropertyFormatted($resourceProperties.NamePropDisplayName))
			#end
		</div>		
		<div class="chefPageviewTitle">
			Complete the form(s) then choose 'post' at the bottom. A <span class="chefRequiredInline">means</span> required information. 
			<br />
		</div>
		<form 
			name="addFileBasicForm" 
			id="addFileBasicForm" 
			action="#toolForm("ResourcesAction")&special=upload" 
			method="post" 
			enctype="multipart/form-data">
			<input type="hidden" name="from" value="add" />
			<input type="hidden" name="collectionId" value="$validator.escapeHtml($collectionId)" />
			<input type="hidden" name="addFileStep" value="basic" />
			<input type="hidden" name="stateName" value = "addFileBasic" />
			<input type ="hidden" name = "itemType" value="file" />
			<input type="hidden" name="eventSubmit_doAdd_file_basic" value="x" />
			<input type="hidden" name="option" value="change" />
			<span class="chefRequiredInline">Select</span> number of files to add: 
			<select name="fileNumber" id="select" onchange="javascript:document.addFileBasicForm.submit();">
				#foreach ($i in [1 .. 10])
					#if ($i==$currentFileNumber)
						<option value="$i" selected="selected">$i</option>
					#else
						<option value="$i">$i</option>
					#end
				#end
			</select>
			#foreach( $i in [1 ..$currentFileNumber] )
				<fieldset>
					<legend>
						#if ($currentFileNumber == 1)
							File
						#else
							File $i of $currentFileNumber
						#end
					</legend>
					<table class="chefEditItem">
						<tr>
							<td class="chefLabel">
								#if ($unqualified_fields.get($i).indexOf("osname")!=-1)
									<span class="chefRequiredInline">Choose</span>a file:
								#else
									<span class="chefRequiredInline">Choose</span>a file:
								#end
							</td>
							<td>
								#if ($osNames.get($i).length()==0)
									 <input type="file" name="filename$i"  class ="upload" />
								#else
									$osNames.get($i)<br>
									To change: <br>
									<input type="file" name="filename$i" size="20" class ="upload" />
								#end
							</td>
						</tr>
						<tr> 
							<td class="chefLabel">
								#if (($titles.get($i).length()>0) && ($unqualified_fields.get($i).indexOf($service.newResourceProperties().NamePropDisplayName)!=-1))
									<span class="chefRequiredInline">Title:</span>
								#else
									 Title:
								#end
							</td>
							<td>
								<input type="text" name ="title$i" value="$titles.get($i)" />
							</td>
						</tr>
						<tr>
							<td class="chefLabel"> 
								Description:
							</td>
							<td>
								<textarea name="description$i" rows="5" cols="40" wrap="virtual">$validator.escapeHtmlTextarea($descriptions.get($i))</textarea>
							</td>
						</tr>
						<tr>
							<td class="chefLabel">
								#if ($unqualified_fields.get($i).indexOf($service.newResourceProperties().NamePropCopyright)!=-1)
									<span class="chefRequiredInline">Copyright:</span>
								#else
									<span class="chefRequiredInline">Copyright:</span>
								#end
							</td>
							<td>
								#if ($copyrights.get($i)!="newcopyright")
									<input type="radio" name="copyright$i" value="mycopyright" id ="mycopyright$i" checked="checked" onclick="clearNewCopyright(newcopyrighttext$i);" />
									<label for ="mycopyright$i">Use my copyright information</label> <br />
									<input type="radio" name="copyright$i" id="newcopyright$i"  value="newcopyright" />
									<label for ="newcopyright$i">Use copyright below</label> <br />
									<textarea name="newcopyrighttext$i" id="newcopyrighttext$i" rows="5" cols="40" wrap="virtual" onfocus="enableNewCopyright(mycopyright$i, newcopyright$i);" ></textarea>
								#else
									<input type="radio" name="copyright$i" value="mycopyright" id ="mycopyright$i" onclick="clearNewCopyright(newcopyrighttext$i)" />
									<label for ="mycopyright$i">Use my copyright information</label> <br />
									<input type="radio" name="copyright$i" value="newcopyright" id="newcopyright$i" checked="checked" />
									<label for ="newcopyright$i">Use copyright below</label> <br />
									<textarea name="newcopyrighttext$i" id="newcopyrighttext$i" rows="5" cols="40" wrap="virtual">$validator.escapeHtmlTextarea($newcopyrights.get($i))</textarea>				
								#end
							</td>
						</tr>
						#if (!$dropboxMode)
							## not show the public view in dropbox
							<tr> 
								<td class = "chefLabel"> 
									Public View:
								</td>
								<td>
									#set ($pubview = $pubviews.get($i))
									#if ($pubviewset)
										Set to Yes in a containing folder.
									#else
										<input type="radio" name="pubview$i" id="pubview_true$i" value="true" #if ($pubview) checked="checked" #end />Yes<br />
										<input type="radio" name="pubview$i" id="pubview_false$i" value="false" #if (!$pubview) checked="checked" #end />No
									#end
								</td>
							</tr>
						#end
						#* only allow open in new window for 2003 fall release
						<tr> 
							<td class="chefLabel"> 
								Open in:
							</td>
							<td>		
								#if ($openIns.get($i) == "false")
									<input type="radio" name="target$i" id="targetnew$i" value="true" />
									<label for ="targetnew$i">New window</label> <br />
									<input type="radio" name="target$i" id="targetthis$i" value="false" checked="checked" />
									<label for ="targetthis$i">This window</label> <br />
								#else
									<input type="radio" name="target$i" id="targetnew$i" value="true" checked="checked" />
									<label for ="targetnew$i">New window</label> <br />
									<input type="radio" name="target$i" id="targetthis$i" value="false" />
									<label for ="targetthis$i">This window</label> <br />
								#end
							</td>
						</tr>
						*#
					</table>
				</fieldset>
			#end
				#if (!$dropboxMode && ($notification))
					## not show notification in dropbox
					<table>
							<tr>
							<td style="vertical-align:middle">Email Notification:</td>
                                                        <td>
                                                                <select name="notify">
                                                                        <option value="r">High - All participants</option>
                                                                        <option value="o">Low - Only participants who have opted in</option>
                                                                        <option value="n" selected="selected">None - No notification</option>
                                                                </select>
							</td>
						</tr>
					</table>
				#end
			<div class ="chefButtonRow">
				<input
					type="button" 
					name="Add file" 
					id="Add file" 
					value="Post"
					onClick="document.addFileBasicForm.option.value='add'; document.addFileBasicForm.submit(); return false;"
## %%% paitence disabled -ggolden
##					onclick="document.forms['addFileBasicForm'].onsubmit='showSubmitMessage();';"
##					onclick="showSubmitMessage();setMainFrameHeight( "$validator.escapeJavascript( 'Main$data.Js_peid' )" );', 1);"
				/>
				<input 
					type="submit" 
					name="Cancel" 
					id="Cancel" 
					value="Cancel"
					onClick="document.addFileBasicForm.option.value='cancel'; document.addFileBasicForm.submit(); return false;"
				/>
			</div>
			<p />
			<b>Note:</b> You can only upload 20MB worth of files at one time. You may need to upload large files one at a time.
		</form>
	</div>
</div>
