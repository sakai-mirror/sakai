##<!-- $Header: /cvs/sakai/chef-tool/src/webapp/vm/sitesetupgeneric/chef_site-siteInfo-list.vm,v 1.1 2004/10/13 23:26:51 zqian.umich.edu Exp $ -->
## Site list Sites list on worksite setup home page
<div class ="chefPortletContainer">
	#if($menu)#toolbar($menu)#end
	<div class ="chefPortletContent">
		#if ($alertMessage)
			<div class="chefAlertBox">Alert: $validator.escapeHtml($alertMessage)</div>
			<div style="display:block;clear:both"></div>
		#end

		#if ($allowUpdate)
			<table cellpadding="0" cellspacing="0" class="chefItemDetail" summary="Site Information">
				<tr>
					<td class="chefLabel">
						Title:
					</td>
					<td>
						$validator.escapeHtml($!siteTitle)
					</td>
					<td class="chefLabel">
						Creation Date:
					</td>
					<td>
						$!siteCreationDate
				</tr>
				<tr> 
					<td class="chefLabel">
						Site Contact:
					</td>
					<td>
						$validator.escapeHtml($!contactName)
					</td>
					<td colspan="2">
						&nbsp;
					</td>
				</tr>
				<tr> 
					<td class="chefLabel">
						Site Contact Email:
					</td>
					<td>
						<a href="mailto:$!contactEmail">$!contactEmail</a>
					</td>
					<td colspan="2">
						&nbsp;
					</td>
				</tr>
				<tr> 
					<td class="chefLabel">
						Joinable:
					</td>
					<td>
						#if ($!siteJoinable)
							Yes
						#else
							No
						#end
					</td>
					<td class="chefLabel">
						
					</td>
					<td>
						
					</td>
				</tr>
			</table>	
		#else
			<table cellpadding="0" cellspacing="0" class="chefSectionContent" summary="Site Information">
				<tr>
					<td class="chefLabel">
						Title:
					</td>
					<td>
						$validator.escapeHtml($!siteTitle)
					</td>
				</tr>
				<tr>
					<td colspan="2">
						&nbsp;
					</td>
				</tr>
				<tr> 
					<td class="chefLabel">
						Site Contact:
					</td>
					<td>
						$validator.escapeHtml($!contactName)
					</td>
				</tr>
				<tr> 
					<td class="chefLabel">
						Site Contact Email:
					</td>
					<td>
						<a href="mailto:$!contactEmail">$!contactEmail</a>
					</td>
				</tr>
			</table>	
		#end
		<br />
		#if ($allowUpdate || $viewRoster)
			<table class ="chefFlatListViewTable" style="margin-left: 20px" cellpadding="0" cellspacing="0" summary ="Table holds the information of site participant. Column 1 holds the index number, column 2 holds the name, Column 3 holds uniqname, Column 4 holds the role, Headers hold links for sorting">
				<CAPTION>
					$validator.escapeHtml($!siteTitle) Participant List
				</CAPTION>
				<tr>
					<th>
						#
					</th>
					<th id="name">
						<a href="#toolLink("SiteAction" "doSort_roster")&criterion=participant_name" title ="Sort by name"> 
							Name
							#if ($currentSortedBy.equals("participant_name")) 
								#if ($currentSortAsc.equals("true")) 
									<img src = "#imageLink("chef/sortascending.gif")" border="0" title ="Sort by name ascending" alt ="Sort by name ascending" /> 
								#else 
									<img src = "#imageLink("chef/sortdescending.gif")" border="0" title ="Sort by name descending" alt ="Sort by name descending" /> 
								#end 
							#end 
						</a>
					</th>
					<th id="uniqname">
						<a href="#toolLink("SiteAction" "doSort_roster")&criterion=participant_uniqname" title ="Sort by uniqname"> 
							Username
							#if ($currentSortedBy.equals("participant_uniqname")) 
								#if ($currentSortAsc.equals("true")) 
									<img src = "#imageLink("chef/sortascending.gif")" border="0" title ="Sort by uniqname ascending" alt ="Sort by uniqname ascending" /> 
								#else 
									<img src = "#imageLink("chef/sortdescending.gif")" border="0" title ="Sort by uniqname descending" alt ="Sort by uniqname descending" /> 
								#end 
							#end 
						</a>
					</th>
					<th id="role">
						<a href="#toolLink("SiteAction" "doSort_roster")&criterion=participant_role" title ="Sort by role"> 
							Role
							#if ($currentSortedBy.equals("participant_role")) 
								#if ($currentSortAsc.equals("true")) 
									<img src = "#imageLink("chef/sortascending.gif")" border="0" title ="Sort by role ascending" alt ="Sort by role ascending" /> 
								#else 
									<img src = "#imageLink("chef/sortdescending.gif")" border="0" title ="Sort by role descending" alt ="Sort by role descending" /> 
								#end 
							#end 
						</a>
					</th>
				</tr>
				#set($count = 1)
				#foreach($participant in $participantList)
					<tr>
						<td>
							$count
						</td>
						<td headers="name">
							$participant.getName()
						</td>
						<td headers="uniqname">
							$participant.getUniqname()
						</td>
						<td headers="role">
							#set($role = "")
							#set($role = $participant.getRole())
							$!role
							#if ($!role.length() == 0)
								#foreach ($pRole in $participant.getRoles())
									$pRole.getId()
								#end
							#end
						</td>
					</tr>
					#set($count = $count + 1)
				#end
			</table>
		#end
	</div>
</div>
