##<!-- $Header: /cvs/sakai/chef-tool/src/webapp/vm/sitesetupgeneric/chef_site-modifyENW.vm,v 1.8 2005/02/14 17:34:41 zqian.umich.edu Exp $ -->
## modify Email Archive, News and Web Content tool 
##   - did some work on producing valid ids for inputs that would be good to validate 
<div class="portletBody">
	#if ($alertMessage)
		<div class="chefAlertBox">Alert: $validator.escapeHtml($alertMessage)</div>
		<div style="display:block;clear:both"></div>
	#end
	<h3 class="insColor insBak insBor">
		Customize Tools
	</h3>                            
	<p class="step">
		Step $!step of $!totalSteps: Customize these tools for your site... 
	</p>
	<p class="instruction">
		Customize these tools for your site now, or do this later at Site Info - Edit Tools.
	</p>
	<form name = "ENWForm" method = "post" action="#toolForm("SiteAction")">
		<input type="hidden" name="option" value="add" />
		<input type="hidden" name="$function" value="x" />
			#foreach($toolId in $!toolRegistrationSelectedList)
				## set up a hidden input field for every selected tool except for Email Archive, News and Web Content tool
				#if ($toolId != "chef.mailbox" && $toolId.indexOf("chef.news") == -1 && $toolId.indexOf("chef.iframe") == -1)
					<input type="hidden" name="selectedTools" value="$toolId" />
				#end
			#end
			#set($hasEmail = false)
			#set($hasNews = false)
			#set($hasWC = false)
			#foreach($toolId in $!toolRegistrationSelectedList)
				#if ($toolId == "chef.mailbox")
					#set($hasEmail = true)
				#elseif ($toolId.indexOf("chef.news") != -1)
					#set($hasNews = true)
				#elseif ($toolId.indexOf("chef.iframe") != -1)
					#set($hasWC = true)
				#end
			#end
			#if ($hasEmail)
				<h4 class="insColor insBak insBor">
					Email Archive
				</h4>
				<div class="indnt3">
					<input type="hidden" name="selectedTools" value="chef.mailbox" />
					<p class="shorttext">
						<label for="emailId">
							Site email address:
						</label>
						<span class="reqStar">*</span><input type="text"  class="req" title="Email address (required)" name="emailId" id="emailId" value="$!emailId" size="10" maxlength="32" />@$serverName
					</p>
				</div>	
				#end
			#if ($hasNews)
				#set ($Newscount=0)			
				<h4 class="insColor insBak insBor">
					News
				</h4>
				<div class="indnt3">
					#foreach($toolId in $toolRegistrationSelectedList)
						#if ($toolId.indexOf("chef.news") != -1)
							#set ($Newscount=$Newscount +1)			
							<input type="hidden" name="selectedTools" value="$toolId" />
							<p class="shorttext">
								#set($name = "titlefor")
								#set($name = $name.concat($toolId))
								<label for="${name}${Newscount}-NewsT">
									Title:
								</label>
								<span class="reqStar">*</span><input type="text"  class="req" id="${name}${Newscount}-NewsT" name="$name" value="$!newsTitles.get($toolId)" size="15" maxlength="32"  /><span class="inlinstruction"> (Suggested length 15 char.)</span>
							</p>
							<p class="shorttext">
								#set($name = "urlfor")
								#set($name = $name.concat($toolId))
								<label for ="${name}${Newscount}-NewsU">
									URL:
								</label>
								<span class="reqStar">*</span><input type="text" class="req" id="${name}${Newscount}-NewsU"  name="$name" value="$!newsUrls.get($toolId)" size="50" />
							</p>
						#end
					#end
					<div class="labelindnt">
						<select name="newsNum" id="newsNum" onchange="document.ENWForm.option.value='addNews';javascript:document.ENWForm.submit();">
							<option value="$j" selected="selected">More News Tools?</option>
							#foreach ($j in [1 .. 3])
								<option value="$j">$j more</option>
							#end
						</select>	
					</div>
				</div>
			#end
			#if ($hasWC)
				#set ($WCcount=0)
				<h4 class="insColor insBak insBor">
					Web Content
				</h4>
				<div class="indnt3">
					#foreach($toolId in $toolRegistrationSelectedList)
						#if ($toolId.indexOf("chef.iframe") != -1)
							#set ($WCcount=$WCcount +1)			
							<input type="hidden" name="selectedTools" value="$toolId" />
							<p class="shorttext">
								#set($name = "titlefor")
								#set($name = $name.concat($toolId))
								<label for="${name}${WCcount}-WCT">
									Title:
								</label>
								<span class="reqStar">*</span><input type="text"  class="req" id="${name}${WCcount}-WCT" name="$name" value="$!wcTitles.get($toolId)" size="15" maxlength="32" /> <span class="inlinstruction">(Suggested length 15 char.)</span><br />
							</p>
							<p class="shorttext">
								#set($name = "urlfor")
								#set($name = $name.concat($toolId))
								<label for="${name}${WCcount}-WCU">
									URL:
								</label>
								<input type="text"  id="${name}${WCcount}-WCU" name="$name" value="$!wcUrls.get($toolId)" size="50" />
							</p>
						#end
					#end
					<div class="labelindnt">
						<select name="wcNum" id="wcNum" onchange="document.ENWForm.option.value='addWC';javascript:document.ENWForm.submit();">
							<option value="$j" selected="selected">More Web Content Tools?</option>
							#foreach ($j in [1 .. 3])
								<option value="$j">$j more</option>
							#end
						</select>
					</div>	
				</div>
			#end
		<input type="hidden" name="back" value="$back" />
		<input type="hidden" name="template-index" value="26" />
		<input type="hidden" name="continue" value="$continue" />
		<div class="act">
			<input type="submit" name="Continue" 
				class="active"
				value="Continue" 
				onclick="document.ENWForm.option.value='continue';javascript:document.ENWForm.submit();" />
			<input type="submit" name="Back" 
				value="Back" 
				onclick="document.ENWForm.option.value='back';javascript:document.ENWForm.submit();" />
			<input type="submit" name="Cancel" 
				value="Cancel" 
				onclick="document.ENWForm.option.value='cancel';javascript:document.ENWForm.submit();" />
		</div>
	</form>
</div>