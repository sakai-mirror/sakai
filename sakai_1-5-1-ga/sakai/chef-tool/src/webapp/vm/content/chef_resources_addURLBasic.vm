## $Header: /cvs/sakai/chef-tool/src/webapp/vm/content/chef_resources_addURLBasic.vm,v 1.8 2005/01/20 14:47:40 zqian.umich.edu Exp $ 

<script type="text/javascript" language="JavaScript">
  	focus_path = ["Url1"];
		
	function checkItem(copyrightIndex, fileIndex)
	{
		var obj_alert_name="copyrightAlert"+fileIndex;
		var obj_alert_item=document.getElementById(obj_alert_name);
		var obj_newcopyright_name="newcopyright"+fileIndex;
		var obj_newcopyright_item=document.getElementById(obj_newcopyright_name);
		if (copyrightIndex == 0)
		{
			obj_alert_item.checked=false;
			obj_newcopyright_item.disabled=true;
		}
		else if (copyrightIndex < 5)
		{
			obj_alert_item.checked=true;
			obj_newcopyright_item.disabled=true;
		}
		else if (copyrightIndex == 5)
		{
			obj_alert_item.checked=true;
			obj_newcopyright_item.disabled=false;
		}
	}
</script>
<div class="chefPortletContainer">
	<div class ="chefPortletToolBarMessage">
		Adding links...
	</div>
	<div class="chefPortletContent">
		#if ($alertMessage)<div class="chefAlertBox">Alert: $validator.escapeHtml($alertMessage)</div>#end
		<div class ="chefBreadCrumb">
			Location:
			<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" />
			#foreach ($id in $collectionPath)
				#if ($dropboxMode && $id==$homeCollection)
					$siteTitle Drop Box /
				#else
					$validator.escapeHtml($service.getProperties($id).getPropertyFormatted($resourceProperties.NamePropDisplayName)) /
				#end
			#end
			#if ($dropboxMode && $collectionId==$homeCollection)
				$siteTitle Drop Box
			#else
				$validator.escapeHtml($service.getProperties($collectionId).getPropertyFormatted($resourceProperties.NamePropDisplayName))
			#end
		</div>
		<div class="chefPageviewTitle">
			Complete the form(s) then choose 'post' at the bottom. A <span class="chefRequiredInline">means</span> required information.
		</div>
		<form name="addUrlBasicForm" action="#toolForm("ResourcesAction")" method="post">
			<input type="hidden" name="stateName" value = "addUrlBasic" />
			<input type="hidden" name="from" value="add" />
			<input type="hidden" name="collectionId" value="$validator.escapeHtml($collectionId)" />
			<input type ="hidden" name = "itemType" value="Url" />
			<input type="hidden" name="eventSubmit_doAddurl" value="x" />
			<input type="hidden" name="option" value="change" />
			<span class="chefRequiredInline">Select</span> number links to add:
			<select name="urlNumber" id="select" onchange="javascript:document.addUrlBasicForm.submit();">
				#foreach ($i in [1 .. 10])
					#if ($i==$currentUrlNumber)
						<option value="$i" selected="selected">$i</option>
					#else
						<option value="$i">$i</option>
					#end
				#end
			</select>
			#foreach( $i in [1 ..$currentUrlNumber] )
				<fieldset>
					<legend>
						#if ($currentUrlNumber == 1)
							Link
						#else
							Link $i of $currentUrlNumber
						#end
					</legend>
					<table class="chefEditItem">
						<tr> 
							<td class ="chefLabel">
								#if ($unqualified_fields.get($i).indexOf("URLcontent")!=-1)
									<span class="chefRequiredInline">URL:</span>
								#else
									<span class="chefRequiredInline">URL:</span>
								#end
							</td>
							<td>
								<input type="text" name="Url$i" id="Url$i" size="80" value="$validator.escapeHtml($urls.get($i))" />
							</td>
						</tr>
						<tr>
							<td class ="chefLabel"> 
								#if (($titles.get($i).length()>0)&&($unqualified_fields.get($i).indexOf($titles.get($i))!=-1))
									<span class="chefAlert">Title: </span>
								#else
									Title:
								#end 
							</td>
							<td>
								<input type="text" name="title$i" value="$validator.escapeHtml($titles.get($i))" size="40" />
							</td>
						</tr>
						<tr> 
							<td class ="chefLabel"> 
								Description
							</td>
							<td>  
								<textarea name="description$i" rows="5" cols="40" wrap="virtual">$validator.escapeHtmlTextarea($descriptions.get($i))</textarea>
							</td>
						</tr>
						#* only allow open in new window for 2003 fall release
						<tr>
							<td class ="chefLabel">
								Open in:
							</td>
							<td>
								#if ($openIns.get($i)=="false")
									<input type="radio" name="target$i" id="targetnew$i" value="true" />
									<label for ="targetnew$i">New window</label> <br />
									<input type="radio" name="target$i" id="targetthis$i" value="false" checked="checked" />
									<label for ="targetthis$i">This window</label> <br />
								#else
									<input type="radio" name="target$i" id="targetnew$i" value="true" checked="checked"/>
									<label for ="targetnew$i">New window</label> <br />
									<input type="radio" name="target$i" id="targetthis$i" value="false" />
									<label for ="targetthis$i">This window</label> <br />
								#end
							 </td>
						</tr>
						*#
						#if ($!copyrightTypes)
							<tr>
								<td class="chefLabel" nowrap="nowrap">
									<span class="chefRequiredInline">Copyright Status:</span>
								</td>
								<td>
									#if ($!fairuseurl)
										For information on copyright and fair use, please refer to: $fairuseurl<br />
									#end
									#foreach ($k in [0..$copyrightTypesSize])
										#set($copyright = $copyrightTypes.get($k))
										<input type="radio" name="copyright$i" id ="copyright$i" value="$copyright" #if ($copyrights.get($i)==$copyright)checked="checked"#end />$copyright<br />
									#end
									#if ($!newcopyrightinput == "true")
										<textarea name="newcopyright$i" id="newcopyright$i" rows="5" cols="40" wrap="virtual" >$validator.escapeHtmlTextarea($newcopyrights.get($i))</textarea><br />
									#end
									<br />
									<input type="checkbox" name="copyrightAlert$i" id ="copyrightAlert$i" value="true" #if ($copyrightAlerts.get($i).equalsIgnoreCase("true")) checked="checked"#end/>Display copyright alert below and require acknowledgement.<br />
									<div class="chefAlertBox">
										<ul>
											<li>You may download or copy this file for use in this site.</li>
											<li>You may NOT download or copy this file to another site.</li>
											<li>You may NOT download or copy this file for publication or sale.</li>
										</ul>
									</div>
								</td>
							</tr>
						#end
						#if (!$dropboxMode)
							<tr> 
								<td class = "chefLabel"> 
									Public View:
								</td>
								<td>
									#set ($pubview = $pubviews.get($i))
									#if ($pubviewset)
										Set to Yes in a containing folder.
									#else
										<input type="radio" name="pubview$i" id="pubview_true$i" value="true" #if ($pubview) checked="checked" #end />Yes<br />
										<input type="radio" name="pubview$i" id="pubview_false$i" value="false" #if (!$pubview) checked="checked" #end />No
									#end
								</td>
							</tr>
						#end
					</table>
				</fieldset>	
			#end
			#if (!$dropboxMode && $notification)
				## not show notification in dropbox mode
				<table>
						<tr>
						<td style="vertical-align:middle">Email Notification:</td>
						<td>
							<select name="notify">
								<option value="r">High - All participants</option>
                                  <option value="o">Low - Only participants who have opted in</option>
                                  <option value="n" selected="selected">None - No notification</option>
							</select>
						</td>
					</tr>
				</table>
			#end
			<div class ="chefButtonRow">
				<input
					type="button" 
					name="Add URL" 
					id="Add URL" 
					value="Post"
					onClick="document.addUrlBasicForm.option.value='add'; document.addUrlBasicForm.submit(); return false;"
				/>
				<input 
					type="submit" 
					name="Cancel" 
					id="Cancel" 
					value="Cancel"
					onClick="document.addUrlBasicForm.option.value='cancel'; document.addUrlBasicForm.submit(); return false;"
				/>
			</div>
		</form>
	</div>
</div>
